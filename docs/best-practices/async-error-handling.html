<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Async error handling | Vue experience</title>
    <meta name="description" content="Experience from vue world">
    
    
    <link rel="preload" href="/EXPA--VUE/assets/css/0.styles.24ad33b6.css" as="style"><link rel="preload" href="/EXPA--VUE/assets/js/app.67e2a29d.js" as="script"><link rel="preload" href="/EXPA--VUE/assets/js/5.008920e7.js" as="script"><link rel="prefetch" href="/EXPA--VUE/assets/js/13.ef483fd9.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/2.234811cb.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/3.dba5fc01.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/4.45f0375e.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/6.e398fcb1.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/7.70614400.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/8.515b46f8.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/9.ddc85b1a.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/10.d4a0ef47.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/11.ba635a0f.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/12.b26eb1dc.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/14.cf28154e.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/15.ce270c79.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/16.1b31f338.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/17.24537d19.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/18.0f614fee.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/19.4fbeb3f2.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/20.27db7d1b.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/21.d9fd5285.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/22.25e2610b.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/23.e4ea864f.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/24.c40811e4.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/25.e8c29ca1.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/26.a4bde2f2.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/27.754dcee9.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/28.1bca13be.js"><link rel="prefetch" href="/EXPA--VUE/assets/js/29.c6436cf8.js">
    <link rel="stylesheet" href="/EXPA--VUE/assets/css/0.styles.24ad33b6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/EXPA--VUE/" class="home-link router-link-active"><!----> <span class="site-name">Vue experience</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/EXPA--VUE/" class="nav-link">Home</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/EXPA--VUE/" class="nav-link">Home</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/EXPA--VUE/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/EXPA--VUE/tag-binding.html" class="sidebar-link">Vue.js - tag binding</a></li><li><a href="/EXPA--VUE/vue-webpack.html" class="sidebar-link">Vue.js - Webpack</a></li><li><a href="/EXPA--VUE/vue-router.html" class="sidebar-link">Vue-router</a></li><li><a href="/EXPA--VUE/vuex.html" class="sidebar-link">Vuex</a></li><li><a href="/EXPA--VUE/vue-resource.html" class="sidebar-link">Vue resource (http)</a></li><li><a href="/EXPA--VUE/custom-directives.html" class="sidebar-link">Custom directives</a></li><li><a href="/EXPA--VUE/vue-blade.html" class="sidebar-link">Vue JS + Blade(Laravel)</a></li><li><a href="/EXPA--VUE/tricks-tips.html" class="sidebar-link">Tricks &amp; Tips</a></li><li><a href="/EXPA--VUE/async-comps.html" class="sidebar-link">Async components</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Best practices</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/EXPA--VUE/best-practices/script.html" class="sidebar-link">Script</a></li><li><a href="/EXPA--VUE/best-practices/template.html" class="sidebar-link">Template</a></li><li><a href="/EXPA--VUE/best-practices/async-error-handling.html" class="active sidebar-link">Async error handling</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/EXPA--VUE/best-practices/async-error-handling.html#error-notification" class="sidebar-link">Error notification</a></li><li class="sidebar-sub-header"><a href="/EXPA--VUE/best-practices/async-error-handling.html#promise-all" class="sidebar-link">Promise.all</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>My mixins</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Examples 1</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Examples 2</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="async-error-handling"><a href="#async-error-handling" aria-hidden="true" class="header-anchor">#</a> Async error handling</h1> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><strong>1.</strong> <em>It's important to decide how you will handle errors in the very start of the development process!</em> Discuss it with designer and customer. You need to understand how will your components, which provide user with information about error, look like (modal windows, popups, error pages etc.).</p> <p><strong>2.</strong> It's important to understand, that even though we struggle to create a perfect product,
there will always be a possibility to catch an error. When you write a request to the backend just ask yourself:
<em>'What will user see, if this request retutns an error? Will he understand what happened and what to do next after this?&quot;</em></p> <p><strong>3.</strong> Never write a request to BE without error catching and error handling.</p> <p><strong>4.</strong> What is the best way to inform  user about an error in your programm? Well, there are many possible variants. Here is one of them:
- first of all, show him a modal with brief and clear message of what happened.</p></div> <h2 id="error-notification"><a href="#error-notification" aria-hidden="true" class="header-anchor">#</a> Error notification</h2> <h4 id="bad-practice"><a href="#bad-practice" aria-hidden="true" class="header-anchor">#</a> Bad practice:</h4> <p>&quot;Something went wrong&quot;, &quot;An error occured&quot;.</p> <h4 id="good-practice"><a href="#good-practice" aria-hidden="true" class="header-anchor">#</a> Good practice:</h4> <p>&quot;An error occured. Failed to load the list of requested videos.&quot;
How do we do this?</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token function">fetchVideosList</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>videos<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">commit</span><span class="token punctuation">(</span><span class="token constant">SET_VIDEOS_LIST</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'showErrorMessage'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'Failed to load requested videos list'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">:</span> <span class="token string">'An error occured'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">throw</span> err
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This is our action, where we want to get the list of videos. So we make a request to BE and 'await' a Promise.
If the Promise is rejected, the rejected value is thrown and we catch it in the 'Catch' block.<br>
Now we 'emit' the 'showErrorMessage' event. Our modal window component listens to it. When the modal hears it, it's shown with the message we pass.
The last thing we need is to throw the error to the higher leveled code. What do we need it for? The answer is provided below.</p> <ul><li>The next step is to catch the error directly in the component, where we called our 'fetchVideosList'  action.</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token function">requestData</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchVideosList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> err
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>What for? Let's imagine a situation: an error occured and our model with error message appeared. User read the message and closed the modal. What next? The script fell and user cannot see the full data on page. Depending on the severity of the error, we can handle it differently. We can redirect user to the error page or hide an empty section etc. (discuss  it with designer and customer).</p> <hr> <h2 id="promise-all"><a href="#promise-all" aria-hidden="true" class="header-anchor">#</a> Promise.all</h2> <p>Here is a little advise for last.
If you have something like this...</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token function">requestData</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchVideosList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchVideosPageSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchSelectedVideos</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchUserData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> err
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>...and you need all Promises to be resolved before render and it's Ok not to do this in the exact sequence, better use <em><strong>Promise.all</strong></em> method.
The Promise.all method returns a single Promise that resolves when <em>all of the promises in the iterable argument have resolved</em> or when the iterable argument contains no promises. It rejects with the reason of the first promise that rejects.
This wil look like this:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token function">requestData</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchVideosList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchVideosPageSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchSelectedVideos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchUserData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> err
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Why is it better?</strong> First of all, the code looks more clear. The other important thing - it takes less time to perform, as the functions <em>([this.fetchVideosList(), this.fetchVideosPageSettings(), this.fetchSelectedVideos(), this.fetchUserData()])</em> perform in parallel, not one by one.</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/EXPA--VUE/best-practices/template.html" class="prev">
          Template
        </a></span> <span class="next"><a href="/EXPA--VUE/my-mixins/api.html">
          Api mixin
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/EXPA--VUE/assets/js/5.008920e7.js" defer></script><script src="/EXPA--VUE/assets/js/app.67e2a29d.js" defer></script>
  </body>
</html>
